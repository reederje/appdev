 <!DOCTYPE html>
<html>
<body>

<h1>Testing SMART on FHIR</h1>
<p id="output">Loading...</p>

<script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
<script>
function display(data) {
    const output = document.getElementById("output");
    output.innerText = data instanceof Error ?
        String(data) :
        JSON.stringify(data, null, 4);
}
        
const client = new FHIR.client("https://r4.smarthealthit.org");
let patientList = client.request("Patient", { pageLimit: 0 });
let outputBox = document.getElementById("output");
let patientTable = document.createElement("table");
outputBox.appendChild(patientTable);
outputBox.innerText = "";
let row = "";
let cells = [];


patientList.forEach(function(patient) {
 row = patientTable.insertRow();
 cells.push(row.insertCell());
 cells.push(row.insertCell());
 cells.push(row.insertCell());
 cells[0] = patient.identifier;
 cells[1] = patient.name;
 cells[2] = patient.birthDate;
}
</script>

</body>
</html> 
